/*! For license information please see bundle.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("Desktop"));else if("function"==typeof define&&define.amd)define(["Desktop"],e);else{var n="object"==typeof exports?e(require("Desktop")):e(t.Desktop);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,t=>(()=>{"use strict";var e={620:e=>{e.exports=t}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};r.r(o);var a=r(620);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function s(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return d(s,"_invoke",function(n,r,o){var a,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,u=t,d.n=n,i}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,a=f[e],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw l=!0,r}return function(o,f,b){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,b),c=f,u=b;(e=c<2?t:u)||!l;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(d(e={},r,function(){return this}),e),p=s.prototype=c.prototype=Object.create(f);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,d(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=s,d(p,"constructor",s),d(s,"constructor",u),u.displayName="GeneratorFunction",d(s,o,"GeneratorFunction"),d(p),d(p,o,"Generator"),d(p,r,function(){return this}),d(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:b}})()}function d(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}d=function(t,e,n,r){function a(e,n){d(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},d(t,e,n,r)}function p(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){p(a,r,o,i,c,"next",t)}function c(t){p(a,r,o,i,c,"throw",t)}i(void 0)})}}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(g())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&m(o,n.prototype),o}(t,arguments,w(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,t)},h(t)}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(g=function(){return!!t})()}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var k=a&&(r.n(a)()||a.Desktop||a)||("undefined"!=typeof window?window.Desktop:void 0),_=document.createElement("template");_.innerHTML='\n  <style>\n    .qt-container { display:flex; flex-wrap:wrap; gap:8px; padding:10px; }\n    .qt-button {\n      flex: 1 0 30%;\n      min-width:120px;\n      padding:10px;\n      background:#007AA3;\n      color:#fff;\n      border:none;\n      border-radius:6px;\n      font-size:14px;\n      cursor:pointer;\n      transition:background 0.2s ease;\n    }\n    .qt-button:hover { background:#005F7A; }\n    .qt-button:disabled { background:#ccc; cursor:not-allowed; }\n    #status { font-size:12px; color:#666; margin-top:8px; }\n  </style>\n  <div>\n    <div class="qt-container" id="btns"></div>\n    <div id="status">Startingâ€¦</div>\n  </div>\n';var S=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=w(e),function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,g()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}(this,e)).attachShadow({mode:"open"}),t.shadowRoot.appendChild(_.content.cloneNode(!0)),t._buttons=[],t._boundUpdate=t.updateButtons.bind(t),t._logger=console,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){this._statusEl=this.shadowRoot.getElementById("status"),this._btnsDiv=this.shadowRoot.getElementById("btns");var t=this.getAttribute("data-buttons")||this.dataset.buttons;try{t&&(this._buttons=JSON.parse(t))}catch(t){console.warn("[QuickTransfers] invalid data-buttons JSON",t),this._buttons=[]}this.renderButtons(),this.initWidget()}},{key:"disconnectedCallback",value:function(){try{var t=this._getDesktop();t&&t.agentContact&&t.agentContact.removeEventListener&&(t.agentContact.removeEventListener("eAgentContactUpdated",this._boundUpdate),t.agentContact.removeEventListener("eAgentContactStarted",this._boundUpdate),t.agentContact.removeEventListener("eAgentContactEnded",this._boundUpdate))}catch(t){}}},{key:"renderButtons",value:function(){var t=this;this._buttons&&0!==this._buttons.length?(this._btnsDiv.innerHTML=this._buttons.map(function(e,n){return'<button class="qt-button transfer-btn" data-idx="'.concat(n,'" disabled>').concat(t._escape(e.label),"</button>")}).join(""),this._btnsDiv.querySelectorAll(".transfer-btn").forEach(function(e){e.addEventListener("click",function(e){var n=parseInt(e.currentTarget.getAttribute("data-idx"),10),r=t._buttons[n]&&t._buttons[n].dest;r?t.handleTransfer(r):alert("Transfer destination not configured")})})):this._btnsDiv.innerHTML='<div style="color:#666">No buttons configured</div>'}},{key:"_escape",value:function(){return String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[&<>"'`]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}[t]})}},{key:"_getDesktop",value:function(){return void 0!==k&&k||"undefined"!=typeof window&&window.Desktop||null}},{key:"initWidget",value:(f=b(l().m(function t(){var e,n;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=this._getDesktop()){t.n=1;break}return this._statusEl.textContent="SDK not available in this context (window.Desktop undefined)",this._logger.warn&&this._logger.warn("[QuickTransfers] window.Desktop not found in this context."),t.a(2);case 1:if(t.p=1,!e.config||"function"!=typeof e.config.init){t.n=2;break}return t.n=2,e.config.init();case 2:if(e.logger&&e.logger.createLogger)try{this._logger=e.logger.createLogger("quick-transfers-widget")}catch(t){this._logger=console}this._statusEl.textContent="SDK initialized",t.n=4;break;case 3:return t.p=3,n=t.v,console.error("[QuickTransfers] SDK init failed",n),this._statusEl.textContent="SDK init failed",t.a(2);case 4:try{e.agentContact&&e.agentContact.addEventListener&&(e.agentContact.addEventListener("eAgentContactUpdated",this._boundUpdate),e.agentContact.addEventListener("eAgentContactStarted",this._boundUpdate),e.agentContact.addEventListener("eAgentContactEnded",this._boundUpdate))}catch(t){}this.updateButtons();case 5:return t.a(2)}},t,this,[[1,3]])})),function(){return f.apply(this,arguments)})},{key:"updateButtons",value:(s=b(l().m(function t(){var e,n,r,o,a,i,s,f,d,p,b,y;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=this._getDesktop(),n=this.shadowRoot.querySelectorAll(".transfer-btn"),e){t.n=1;break}return n.forEach(function(t){return t.disabled=!0}),this._statusEl.textContent="No active call (SDK not available)",t.a(2);case 1:if(t.p=1,!e.agentContact||"function"!=typeof e.agentContact.getSelectedContact){t.n=2;break}return r=e.agentContact.getSelectedContact(),o=!(!r||"telephony"!==r.mediaType),n.forEach(function(t){return t.disabled=!o}),this._statusEl.textContent=o?"Active call detected":"No active call",t.a(2);case 2:if(!e.actions||"function"!=typeof e.actions.getTaskMap){t.n=11;break}return t.n=3,e.actions.getTaskMap();case 3:if(a=t.v,i=!1,!a){t.n=10;break}s=u(a),t.p=4,s.s();case 5:if((f=s.n()).done){t.n=7;break}if(d=c(f.value,2),!(p=d[1])||"telephony"!==p.mediaType){t.n=6;break}return i=!0,t.a(3,7);case 6:t.n=5;break;case 7:t.n=9;break;case 8:t.p=8,b=t.v,s.e(b);case 9:return t.p=9,s.f(),t.f(9);case 10:return n.forEach(function(t){return t.disabled=!i}),this._statusEl.textContent=i?"Active call detected":"No active call",t.a(2);case 11:t.n=13;break;case 12:t.p=12,y=t.v,console.warn("[QuickTransfers] updateButtons fallback error",y);case 13:n.forEach(function(t){return t.disabled=!0}),this._statusEl.textContent="No active call";case 14:return t.a(2)}},t,this,[[4,8,9,10],[1,12]])})),function(){return s.apply(this,arguments)})},{key:"getInteractionIdFallback",value:(a=b(l().m(function t(){var e,n,r,o,a,i,s;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if((e=this._getDesktop())&&e.actions&&"function"==typeof e.actions.getTaskMap){t.n=1;break}return t.a(2,null);case 1:return t.p=1,t.n=2,e.actions.getTaskMap();case 2:if(n=t.v){t.n=3;break}return t.a(2,null);case 3:r=u(n),t.p=4,r.s();case 5:if((o=r.n()).done){t.n=7;break}if(a=c(o.value,2),!(i=a[1])||!i.interactionId){t.n=6;break}return t.a(2,i.interactionId);case 6:t.n=5;break;case 7:t.n=9;break;case 8:t.p=8,s=t.v,r.e(s);case 9:return t.p=9,r.f(),t.f(9);case 10:t.n=12;break;case 11:t.p=11,t.v;case 12:return t.a(2,null)}},t,this,[[4,8,9,10],[1,11]])})),function(){return a.apply(this,arguments)})},{key:"handleTransfer",value:(o=b(l().m(function t(e){var n,r,o,a;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=this._getDesktop()){t.n=1;break}return alert("Desktop SDK not available â€” cannot transfer."),t.a(2);case 1:if(t.p=1,r=null,n.agentContact&&"function"==typeof n.agentContact.getSelectedContact&&(r=n.agentContact.getSelectedContact()),o=r&&r.interactionId){t.n=3;break}return t.n=2,this.getInteractionIdFallback();case 2:o=t.v;case 3:if(o){t.n=4;break}throw new Error("No active call available to transfer");case 4:if(!n.agentContact||"function"!=typeof n.agentContact.blindTransfer){t.n=6;break}return t.n=5,n.agentContact.blindTransfer({interactionId:o,data:{destAgentId:e,mediaType:"telephony",destinationType:"DN"}});case 5:return this._statusEl.textContent="Transfer attempted to ".concat(e),t.a(2);case 6:throw new Error("blindTransfer API not available on Desktop.agentContact");case 7:t.p=7,a=t.v,console.error("[QuickTransfers] Transfer failed",a),alert("Transfer failed: "+(a.message||String(a))),this._statusEl.textContent="Transfer failed: "+(a.message||"unknown");case 8:return t.a(2)}},t,this,[[1,7]])})),function(t){return o.apply(this,arguments)})}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,a,s,f}(h(HTMLElement));return customElements.define("agentx-qt-transfers-widget",S),o})());